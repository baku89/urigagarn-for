flex-version = flex

@import 'nib'

global-reset()

//--------------------------------------------------
// utils

notext()
	white-space nowrap
	text-indent -9999px
	overflow hidden

content-space()
	content '\00a0'

uniform-centerize()
	display flex
	flex-direction column
	justify-content center

hidpi()
	@media	only screen and (-webkit-min-device-pixel-ratio: 1.3),
	only screen and (-o-min-device-pixel-ratio: 13/10),
	only screen and (min-resolution: 120dpi)
		{block}
	

//--------------------------------------------------
// styles

underline()
	background-image linear-gradient(transparent 50%, alpha(white, 0.5) 50%)
	background-size 10px 2px
	background-repeat repeat-x
	background-position left bottom

	+hidpi()
		background-image linear-gradient(transparent 50%, alpha(white, 0.5) 50%)
		background-size 10px 1px

@font-face {
	font-family: 'HelveticaNeueLTStd-BdCn'
	src: url('HelveticaNeueLTStd-BdCn.eot?#iefix') format('embedded-opentype'),  url('HelveticaNeueLTStd-BdCn.otf')  format('opentype'),
				url('HelveticaNeueLTStd-BdCn.woff') format('woff'), url('HelveticaNeueLTStd-BdCn.ttf')  format('truetype'), url('HelveticaNeueLTStd-BdCn.svg#HelveticaNeueLTStd-BdCn') format('svg')
	font-weight: bold
	font-style: normal
}

*, ::after, ::before
	box-sizing: border-box
	outline none

::selection
	background rgba(255, 255, 255, 0.2);

html, body
	width 100%

html
	height 100%
	font-family: 'HelveticaNeueLTStd-BdCn', "Helvetica Neue", 'Arial', serif
	font-smoothing antialiased
	-moz-osx-font-smoothing: grayscale
	font-size 18px
	font-size 4vw
	letter-spacing .1em

	@media only screen and (min-width: 750px)
		font-size 30px
	
	@media only screen and (min-aspect-ratio: 1/1)
		font-size 4vh
body
	height 150%
	position relative
	color white
	background transparent

.updated-badge
	position absolute
	top 1rem
	right @top
	text-align center
	font-size .6rem
	width 5.5em
	height @width
	background white
	color black
	border-radius 50%
	z-index 100
	cursor pointer
	uniform-centerize()
	transition transform .05s ease

	&:hover
		transform scale(1.1)

	&__date
		font-size 1.3em

.updated
	display inline-block
	font-size .5em
	background white
	color black
	margin-right .7em
	margin-bottom .2em
	padding-left .2em
	padding-right .1em
	padding-top .3em
	letter-spacing 0.05em
	vertical-align middle

.anchor
	position relative
	top -1rem
	width 1px
	height 1px
	// background red

.jacket
	
	position relative
	width 100%
	margin 0 auto
	perspective 500
	-webkit-perspective 3000
	user-select(none)

	&.hover
		transform scale(1.02)


	@media (min-aspect-ratio: 4/3)
		width (4/3*100)vh

	&__rect
		// opacity 0
		position absolute
		top 0
		left 0
		width 100%
		height 100%
		z-index 200	
		cursor pointer

	&__aspect
		height 0
		padding-top 125%

		@media (min-aspect-ratio: 4/5)
			height 100vh
			padding-top 0
	
	&__block
		position absolute
		top 0
		left 0
		width 100%
		height 100%

	&__window
		position relative
		top 50%
		width 100%
		height 0
		padding-top percentage(768/1024)
		margin-top -1.2rem	
		transform translateY(-50%)
		overflow hidden

	&__sprite
		position absolute
		top 0
		left 0
		width 700%
		height 1000%
		z-index 5
	
	&__highres, &__lowres
		display block
	
	&__highres
		position absolute
		left 0
		top 0
		width percentage(2/7)
		height percentage(1/10)
		z-index 10
	
	&__lowres
		width 100%
		height 100%

a
	color white
	text-decoration none
	padding-top .25em
	padding-left .1em	
	underline()

	&:hover
		color black
		background-color white
	
	&.highlight
		background-image none
		border-top .1em solid transparent
		border-bottom .08em solid white

	&.abbr
		padding-left .2em
		padding-right .1em
	
	&.normal
		background-image none

.content
	position relative
	max-width 1000px
	margin -3rem auto 0

.title
	text-align center
	font-size 2rem
	margin-bottom 2rem

p, .video
	margin-bottom 1.5em

p
	text-align center
	line-height 1.28

	&.social
		margin-top 15%
		margin-bottom 30%

	&.last
		padding-bottom 30%

.icon
	display inline-block
	notext()
	width 1em
	height 1em
	background-position 50% 50%
	background-repeat no-repeat

	&.apple
		margin-bottom -.1em
		background-image embedurl('./embed/icon_apple.svg')
		background-size 90% 90%	
	
	&.spotify
		margin-bottom -.15em
		background-image embedurl('./embed/icon_spotify.svg')
		background-size 85% 85%	
		margin-right .1em

	a:hover &
		filter brightness(-100)

.video
	position relative
	width 90%
	max-width 500px
	margin-left auto
	margin-right auto
	user-select(none)

	&__scale
		height 0
		padding-top percentage(9 / 16)

	&__wrapper
		position absolute
		top 0
		left 0
		width 100%
		height 100%
		transform-origin 0 0

	&__iframe
		position absolute
		top 0
		left 0
		width 100%
		height 100%

.subtitle
	text-align center
	font-size 2rem
	margin-top 4.5rem
	margin-bottom 3rem

.tours
	position relative
	text-align center
	margin-bottom 10%
	
	p
		line-height 1.4

.tour
	width 100%
	padding 0 .5em
	margin-bottom 2em

	&__title
		font-size 1.2rem
		margin-bottom .2em
	
	&__detail
		font-size .8rem

.ja
	font-size .9em

// comments

.comments
	margin-top 5rem
	margin-bottom 6rem

.comment
	font-size .7em
	margin-left auto
	margin-right auto
	padding 0 1em
	margin-bottom 4em


	p
		text-align left
		margin-bottom .8em
		line-height 1.5
		letter-spacing 0.1em


	cite
		display block
		text-align right
		margin-top 1em

		&:before
			content 'â€•'
			display inline-block
			transform scaleX(2)
			transform-origin 100% 0